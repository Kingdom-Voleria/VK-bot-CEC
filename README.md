# VK Bot Service

Веб-сервис для управления VK ботом с веб-интерфейсом.

## Описание

Этот проект представляет собой Flask приложение, которое запускает VK бота в фоновом режиме и предоставляет REST API для управления им.

## Развертывание на Render

### 1. Подготовка проекта

Убедитесь, что у вас есть следующие файлы:
- `app.py` - основное Flask приложение
- `main.py` - логика VK бота
- `requirements.txt` - зависимости Python
- `render.yaml` - конфигурация для Render
- `citizenship_responses.json` - ответы для вопросов о гражданстве
- `site_responses.json` - ответы для вопросов о сайте

### 2. Настройка переменных окружения

В Render Dashboard добавьте переменную окружения:
- `VK_GROUP_TOKEN` - токен вашей VK группы

### 3. Развертывание

1. Подключите ваш GitHub репозиторий к Render
2. Создайте новый Web Service
3. Выберите ваш репозиторий
4. Render автоматически определит настройки из `render.yaml`

### 4. Проверка работы

После развертывания проверьте следующие эндпоинты:

- `GET /` - основная страница с статусом бота
- `GET /health` - проверка здоровья сервиса
- `GET /status` - подробный статус бота
- `POST /start` - запуск бота
- `POST /stop` - остановка бота

## API Endpoints

### GET /
Возвращает основной статус сервиса.

### GET /health
Возвращает статус здоровья сервиса с информацией о токене VK.

### GET /status
Возвращает подробный статус бота, включая информацию о переменных окружения.

### POST /start
Запускает бота (если он не запущен).

### POST /stop
Останавливает бота (если он запущен).

## Локальная разработка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` с переменной:
```
VK_GROUP_TOKEN=your_vk_token_here
```

3. Запустите приложение:
```bash
python app.py
```

## Структура проекта

```
├── app.py                    # Flask приложение
├── main.py                   # Логика VK бота
├── requirements.txt          # Зависимости Python
├── render.yaml              # Конфигурация Render
├── citizenship_responses.json # Ответы для гражданства
├── site_responses.json      # Ответы для сайта
├── known_users.txt          # Известные пользователи
└── README.md               # Документация
```

## Устранение неполадок

### Бот не запускается
1. Проверьте, что переменная `VK_GROUP_TOKEN` установлена в Render
2. Убедитесь, что токен действителен
3. Проверьте логи в Render Dashboard

### Ошибки подключения к VK API
1. Проверьте правильность токена
2. Убедитесь, что токен имеет необходимые права
3. Проверьте, что группа активна

## Автоматический запуск

Бот автоматически запускается при старте приложения на Render. Если бот не запускается, проверьте логи в Render Dashboard. 